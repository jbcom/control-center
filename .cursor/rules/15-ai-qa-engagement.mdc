---
alwaysApply: true
description: MANDATORY AI code review engagement protocol - agents MUST engage QA before merge
globs: ["**/*"]
---

# AI Code Review (QA) Engagement

## üö® CRITICAL: Mandatory Review Before Merge

**NEVER merge a PR without:**
1. Requesting AI review from at least ONE QA agent
2. Waiting for the review to complete
3. FULLY addressing ALL feedback (not just dismissing it)
4. Documenting your response to each piece of feedback

## How to Request Review

Post these commands as PR comments to engage AI reviewers:

```
/gemini review       # Google Gemini Code Assist
/q review            # Amazon Q Developer
@copilot review      # GitHub Copilot
@cursor review       # Cursor AI review
@coderabbitai review # CodeRabbit AI review
```

### Focused Reviews

Request specific review types:
```
/gemini review security     # Security-focused review
/q review performance       # Performance analysis
@copilot review tests       # Test coverage review
@cursor review architecture # Architecture review
```

## When to Request Review

### ALWAYS Request Review For:
- Any code changes (not just docs)
- Bug fixes (even "simple" ones)
- New features
- Refactors of any size
- Dependency updates that affect code
- Security-related changes
- API changes

### May Skip Review For:
- Pure documentation changes (README, comments only)
- Whitespace/formatting-only changes
- Automated dependency bumps (Dependabot) with no code changes

## Addressing Feedback

### MANDATORY Steps:

1. **Read ALL feedback** - Every comment from every AI reviewer
2. **Categorize by severity**:
   - üõë **Critical/High** - MUST fix before merge
   - ‚ö†Ô∏è **Medium** - Should fix or provide strong justification
   - üí° **Low/Info** - Consider, document if skipping
3. **Fix or respond** to EVERY item:
   - Fix the issue, OR
   - Reply explaining why you disagree with technical justification
4. **Re-request review** if you made significant changes
5. **Document** your decisions in the PR

### What "Fully Addressing" Means:

‚ùå **NOT acceptable:**
- Ignoring feedback
- Merging without responding
- Dismissing without justification
- "I'll fix it later"

‚úÖ **Acceptable:**
- Fixing the issue
- "This is intentional because [technical reason]"
- "False positive - [explanation with evidence]"
- "Out of scope for this PR - created issue #X"

## PR Owner Responsibilities

As PR owner, you MUST:
- Request AI review before merge
- Wait for reviews to complete
- Address every piece of feedback
- Not merge until feedback is resolved
- Document your merge decision

## Cross-Agent Collaboration

When taking over another agent's PR:
1. Request fresh AI review
2. Don't dismiss previous agent's decisions without justification
3. Tag original agent if making significant changes
4. Maintain the feedback resolution record

## Merge Checklist

Before merging ANY PR:

- [ ] CI is green (all checks pass)
- [ ] At least ONE AI review requested (`/gemini review`, `/q review`, etc.)
- [ ] AI review completed (not pending)
- [ ] ALL critical/high severity items fixed
- [ ] ALL medium severity items fixed or justified
- [ ] Responses posted to ALL feedback items
- [ ] No unresolved review threads

## Example Workflow

```bash
# 1. Create PR
gh pr create --title "fix: resolve API bug"

# 2. Request AI reviews (post as PR comment)
# /gemini review
# /q review

# 3. Wait for reviews to complete

# 4. Address each piece of feedback
# - Fix code issues
# - Reply to comments

# 5. If significant changes, re-request review
# /gemini review

# 6. Only after ALL feedback addressed:
gh pr merge --squash
```

## Enforcement

This is a MANDATORY protocol. PRs merged without proper AI review engagement
may be reverted. The goal is quality, not speed.
