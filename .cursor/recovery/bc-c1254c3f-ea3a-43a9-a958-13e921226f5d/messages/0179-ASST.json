{
  "id": "74145c3c-7367-4e26-b716-8f4f7b5eedcb",
  "type": "assistant_message",
  "text": "**Simplified!** The workflow now uses the Doppler-inspired pattern:\n\n```yaml\nenv:\n  ALL_SECRETS: ${{ toJson(secrets) }}  # ‚Üê The magic!\n```\n\n## How It Works\n\n1. **`toJson(secrets)`** dumps ALL secret values as JSON\n2. **`jq`** filters/transforms (excludes `github_token`, uppercases keys)\n3. **`gh api`** gets target org's public key\n4. **Python nacl** encrypts each secret value\n5. **`gh api PUT`** sets the secret in target org\n\n## Usage\n\n```bash\n# Dry run (default) - see what would sync\ngh workflow run \"Enterprise Secrets Safety Valve\" \\\n  --repo FlipsideCrypto/terraform-modules \\\n  -f target_orgs=\"fsc-internal-tooling-administration\"\n\n# Actually sync secrets\ngh workflow run \"Enterprise Secrets Safety Valve\" \\\n  --repo FlipsideCrypto/terraform-modules \\\n  -f target_orgs=\"fsc-internal-tooling-administration\" \\\n  -f dry_run=false\n\n# Sync specific secrets only\ngh workflow run \"Enterprise Secrets Safety Valve\" \\\n  --repo FlipsideCrypto/terraform-modules \\\n  -f target_orgs=\"fsc-internal-tooling-administration\" \\\n  -f secrets_filter=\"DOPPLER_TOKEN,VAULT_URL,VAULT_NAMESPACE\" \\\n  -f dry_run=false\n\n# Sync to ALL enterprise orgs\ngh workflow run \"Enterprise Secrets Safety Valve\" \\\n  --repo FlipsideCrypto/terraform-modules \\\n  -f target_orgs=\"all\" \\\n  -f dry_run=false\n```\n\nThe Python module is still there for programmatic use, but the workflow is now self-contained and much cleaner.\n\n**PR**: https://github.com/FlipsideCrypto/terraform-modules/pull/206"
}