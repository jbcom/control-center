# Ecosystem Management README

This template serves as the central management hub for the jbcom Python library ecosystem.

## Overview

The `.ruler/` directory contains centralized AI agent instructions that are automatically distributed to:
- `.cursorrules` - Cursor AI
- `.github/copilot-instructions.md` - GitHub Copilot
- `.claud` - Claude Code
- `AGENTS.md` - Aider and other agents

## Ruler Configuration

The ruler framework manages all agent instructions from a single source of truth in `.ruler/`:

### Core Files

- **`.ruler/AGENTS.md`** - Main agent guidelines (CalVer philosophy, PR workflow, etc.)
- **`.ruler/ecosystem.md`** - Ecosystem repository documentation and coordination
- **`.ruler/cursor.md`** - Cursor-specific configurations (modes, prompts, workflows)
- **`.ruler/copilot.md`** - Copilot-specific quick reference and patterns
- **`.ruler/ruler.toml`** - Configuration for ruler distribution

### Using Ruler

```bash
# Apply ruler to regenerate all agent configs
ruler apply

# Check which files ruler will update
ruler apply --dry-run

# Apply for specific agents only
ruler apply --agents copilot,cursor
```

## Managed Repositories

This template manages and coordinates updates across:

1. **extended-data-types** - Foundation library (production)
2. **lifecyclelogging** - Structured logging (production)
3. **directed-inputs-class** - Input validation (in development)
4. **vendor-connectors** - Service integrations (planning)

See `.ruler/ecosystem.md` for detailed documentation of each repository.

## Making Changes

### Updating Agent Instructions

1. Edit files in `.ruler/` directory
2. Run `ruler apply` to regenerate agent-specific files
3. Test with AI agents to verify behavior
4. Commit both `.ruler/` sources and generated files

### Updating Template CI

When updating the template's own CI (not the distributed CI):
1. Edit `.github/workflows/template-validation.yml`
2. This validates the template itself (scripts, workflows, structure)
3. The distributed CI (`.github/workflows/ci.yml`) is for libraries using the template

### Cross-Repository Updates

For updates affecting multiple ecosystem repos:
1. Test changes in this template first
2. Update extended-data-types (foundation layer)
3. Update dependent libraries in order
4. Create PRs for each repository
5. Coordinate releases (foundation first)

## CI Workflows

### Template Validation (`template-validation.yml`)
Validates THIS template repository:
- Lints Python scripts
- Validates GitHub Actions workflows
- Tests package structure
- Checks documentation
- Verifies ruler configuration

### Distributed CI (`ci.yml`)
For libraries created FROM this template:
- Tests across Python versions
- Type checking
- Linting
- Coverage reporting
- Auto-versioning on main
- PyPI publishing

## Agent Coordination

### Background Agents

When working autonomously:
- Create PRs, don't merge without approval
- Fix linting/test failures automatically
- Respond to PR feedback
- Wait for human approval before merging

### Interactive Mode

When user is actively engaged:
- Ask for confirmation on major actions
- Present options
- Switch to autonomous mode if user gets frustrated

### Ecosystem Work

When coordinating across repositories:
- Always work in dependency order (extended-data-types first)
- Test each library independently
- Create separate PRs per repository
- Ensure CI passes before moving to next

## Directory Structure

```
/workspace/
├── .ruler/               # Centralized agent instructions
│   ├── AGENTS.md        # Main guidelines
│   ├── ecosystem.md     # Ecosystem coordination
│   ├── cursor.md        # Cursor-specific configs
│   ├── copilot.md       # Copilot quick reference
│   └── ruler.toml       # Ruler configuration
│
├── .github/
│   ├── workflows/
│   │   ├── ci.yml                    # Distributed to managed repos
│   │   └── template-validation.yml  # Validates THIS template
│   ├── scripts/
│   │   └── set_version.py           # Auto-versioning script
│   └── copilot-instructions.md      # Generated by ruler
│
├── src/example_package/  # Template package structure
├── tests/                # Template tests
├── .cursorrules          # Generated by ruler
├── AGENTS.md            # Generated by ruler
├── tox.ini              # Test automation
└── pyproject.toml       # Package configuration
```

## Version Management

All ecosystem libraries use CalVer (YYYY.MM.BUILD):
- Auto-generated on every main branch push
- No manual version management
- No git tags
- PyPI is source of truth

## Quick Commands

```bash
# Validate template
python3 .github/scripts/set_version.py  # Test versioning
pytest tests/ -v                         # Run tests
ruff check src/ tests/ .github/scripts/ # Lint code

# Update ecosystem
ruler apply                              # Regenerate agent configs
# (Add commands for ecosystem-wide operations)
```

## Documentation

- **TEMPLATE_USAGE.md** - How to use this template for new projects
- **README.md** - Quick start and overview
- **AGENTS.md** (generated) - Complete agent guidelines
- **`.ruler/*.md`** - Source documentation for agents

## Support

For questions about:
- **Template usage** - See TEMPLATE_USAGE.md
- **CalVer approach** - See .ruler/AGENTS.md
- **Ecosystem coordination** - See .ruler/ecosystem.md
- **Agent behavior** - See agent-specific .ruler/ files

---

**Last Updated:** 2025-11-25
**Ruler Version:** Latest
**Template Status:** Production-ready
