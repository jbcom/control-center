# Stale Issue/PR Management
# Synced from jbcom/control-center
#
# Automatically marks and closes stale issues and PRs.

name: Stale

on:
  schedule:
    - cron: '0 0 * * *'  # Daily at midnight UTC
  workflow_dispatch:

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@v9
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          
          # Issue settings
          days-before-issue-stale: 60
          days-before-issue-close: 14
          stale-issue-message: |
            This issue has been automatically marked as stale because it has not had
            recent activity. It will be closed if no further activity occurs within 14 days.
            
            If this issue is still relevant, please comment to keep it open.
          close-issue-message: |
            This issue was closed due to inactivity. Feel free to reopen if needed.
          stale-issue-label: 'stale'
          exempt-issue-labels: 'pinned,security,bug,in-progress'
          
          # PR settings
          days-before-pr-stale: 30
          days-before-pr-close: 7
          stale-pr-message: |
            This pull request has been automatically marked as stale because it has not had
            recent activity. It will be closed if no further activity occurs within 7 days.
            
            If this PR is still needed, please rebase and update to keep it open.
          close-pr-message: |
            This pull request was closed due to inactivity. Feel free to reopen if needed.
          stale-pr-label: 'stale'
          exempt-pr-labels: 'pinned,security,in-progress'
          
          # Don't stale items with draft status
          exempt-draft-pr: true
          
          # Limit operations per run
          operations-per-run: 100
