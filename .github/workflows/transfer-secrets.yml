name: Transfer Secrets to OSS Ecosystem

on:
  workflow_dispatch:

jobs:
  transfer:
    runs-on: ubuntu-latest
    steps:
      - name: Transfer secrets to jbcom-oss-ecosystem
        env:
          GH_TOKEN: ${{ secrets.CI_GITHUB_TOKEN }}
          PYPI_TOKEN: ${{ secrets.PYPI_TOKEN }}
          NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
          DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}
          DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
          CI_GITHUB_TOKEN: ${{ secrets.CI_GITHUB_TOKEN }}
        run: |
          echo "üîê Transferring secrets to jbcom/jbcom-oss-ecosystem..."
          
          # PYPI_TOKEN
          echo "$PYPI_TOKEN" | gh secret set PYPI_TOKEN --repo jbcom/jbcom-oss-ecosystem
          echo "‚úÖ PYPI_TOKEN transferred"
          
          # NPM_TOKEN
          echo "$NPM_TOKEN" | gh secret set NPM_TOKEN --repo jbcom/jbcom-oss-ecosystem
          echo "‚úÖ NPM_TOKEN transferred"
          
          # DOCKERHUB_TOKEN
          echo "$DOCKERHUB_TOKEN" | gh secret set DOCKERHUB_TOKEN --repo jbcom/jbcom-oss-ecosystem
          echo "‚úÖ DOCKERHUB_TOKEN transferred"
          
          # DOCKERHUB_USERNAME
          echo "$DOCKERHUB_USERNAME" | gh secret set DOCKERHUB_USERNAME --repo jbcom/jbcom-oss-ecosystem
          echo "‚úÖ DOCKERHUB_USERNAME transferred"
          
          # CI_GITHUB_TOKEN (for releases)
          echo "$CI_GITHUB_TOKEN" | gh secret set CI_GITHUB_TOKEN --repo jbcom/jbcom-oss-ecosystem
          echo "‚úÖ CI_GITHUB_TOKEN transferred"
          
          echo ""
          echo "üìã Verifying secrets in jbcom-oss-ecosystem:"
          gh secret list --repo jbcom/jbcom-oss-ecosystem
