name: Sync Centralized Configs

on:
  push:
    branches: [main]
    paths:
      - "cursor-rules/**"
      - ".github/sync.yml"
  workflow_dispatch:

permissions:
  contents: write
  pull-requests: write

jobs:
  sync-files:
    name: Sync to public repos
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8  # v6.0.1

      - name: Run GitHub File Sync
        uses: BetaHuhn/repo-file-sync-action@8b92be3375cf1d1b0cd579af488a9255572e4619  # v1.21.1
        with:
          GH_PAT: ${{ secrets.CI_GITHUB_TOKEN }}
          CONFIG_PATH: .github/sync.yml
          PR_LABELS: |
            sync
            automated
          COMMIT_PREFIX: "ðŸ”„"
          PR_BODY: |
            This PR syncs centralized configurations from jbcom-control-center.

            **Source**: [jbcom/jbcom-control-center](https://github.com/jbcom/jbcom-control-center)

            Changes include:
            - Cursor rules and agent configurations
            - Standardized Dockerfile for development environments
            - Shared CI/CD configurations

            ---
            _Automated by [repo-file-sync-action](https://github.com/BetaHuhn/repo-file-sync-action)_
